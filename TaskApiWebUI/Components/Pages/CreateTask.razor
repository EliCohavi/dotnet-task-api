@page "/create-task"
@rendermode InteractiveServer
@using TaskApi.Dtos
@inject TaskApiClient TasksClient

<h3>Create New Task</h3>

<div  class="form-group">
    <label>Title:</label>
    <input @bind="NewTaskTitle" class="form-control" />
</div>

<div class="form-group">
    <label>Description:</label>
    <input @bind="NewTaskDescription" class="form-control" />
</div>

<div class="form-group">
    <label>Due Date:</label>
    <input @bind="NewTaskDueDate" class="form-control" />
</div>

<button class="btn btn-primary" @onclick="CreateSingleTask">Create Task</button>

@if (createdTask != null)
{
    <p class="mt-3 text-success">
        Created : <strong>@createdTask.Title</strong> (ID: @createdTask.Id)
        Description : @createdTask.Description
        Due Date : @createdTask.DueDate
    </p>
}
@code {
    string NewTaskTitle;
    string NewTaskDescription;
    DateTime NewTaskDueDate;
    bool IsCompleted = false;
    TaskItemDto? createdTask;
    async Task CreateSingleTask()
    {
        if (string.IsNullOrWhiteSpace(NewTaskTitle))
            return;
        var dto = new CreateTaskDto
        {
            Title = NewTaskTitle,
            Description = NewTaskDescription,
            Completed = IsCompleted,
            DueDate = NewTaskDueDate
        };
        createdTask = await TasksClient.CreateTaskAsync(dto);
        // Optional: clear the input after creation
        NewTaskTitle = string.Empty;
        NewTaskDescription = string.Empty;
        NewTaskDueDate = DateTime.MinValue;
    }

}
